namespace SpriteKind {
    export const wall = SpriteKind.create()
}
controller.up.onEvent(ControllerButtonEvent.Pressed, function () {
    set_direction(up)
})
controller.left.onEvent(ControllerButtonEvent.Pressed, function () {
    set_direction(left)
})
controller.right.onEvent(ControllerButtonEvent.Pressed, function () {
    set_direction(right)
})
controller.down.onEvent(ControllerButtonEvent.Pressed, function () {
    set_direction(down)
})
sprites.onOverlap(SpriteKind.Player, SpriteKind.Food, function (sprite, otherSprite) {
    otherSprite.destroy()
    RandomFood()
})
sprites.onOverlap(SpriteKind.Player, SpriteKind.wall, function (sprite, otherSprite) {
    game.over(false)
})
function set_direction (direction: number) {
    if (current_direction != 0 - direction) {
        current_direction = direction
        if (direction == up) {
            snake.setVelocity(0, 0 - velocity)
            snake.setImage(img`
                . . . 2 2 . . . 
                . . 2 2 2 2 . . 
                . 2 2 2 2 1 2 . 
                2 2 2 1 2 1 2 2 
                2 2 2 2 2 2 2 2 
                . 2 2 2 2 2 2 . 
                . . 2 2 2 2 . . 
                . . . 2 2 . . . 
                `)
        } else if (direction == down) {
            snake.setVelocity(0, velocity)
            snake.setImage(img`
                . . . 2 2 . . . 
                . . 2 2 2 2 . . 
                . 2 2 2 2 2 2 . 
                2 2 2 2 2 2 2 2 
                2 2 1 2 1 2 2 2 
                . 2 1 2 2 2 2 . 
                . . 2 2 2 2 . . 
                . . . 2 2 . . . 
                `)
        } else if (direction == left) {
            snake.setVelocity(0 - velocity, 0)
            snake.setImage(img`
                . . . 2 2 . . . 
                . . 2 2 2 2 . . 
                . 2 1 1 2 2 2 . 
                2 2 2 2 2 2 2 2 
                2 2 2 1 2 2 2 2 
                . 2 2 2 2 2 2 . 
                . . 2 2 2 2 . . 
                . . . 2 2 . . . 
                `)
        } else {
            snake.setVelocity(velocity, 0)
            snake.setImage(img`
                . . . 2 2 . . . 
                . . 2 2 2 2 . . 
                . 2 2 2 2 2 2 . 
                2 2 2 2 1 2 2 2 
                2 2 2 2 2 2 2 2 
                . 2 2 2 1 1 2 . 
                . . 2 2 2 2 . . 
                . . . 2 2 . . . 
                `)
        }
    }
}
function RandomFood () {
    apple = sprites.create(img`
        . . . e e . . . 
        . . . e 7 . . . 
        . . 7 7 7 7 . . 
        . 7 7 7 7 7 7 . 
        . 7 7 7 7 7 7 . 
        . . 7 7 7 7 . . 
        . . . 7 7 . . . 
        . . . . . . . . 
        `, SpriteKind.Food)
    apple.setPosition(randint(0, 160), randint(0, 120))
}
let apple: Sprite = null
let current_direction = 0
let right = 0
let left = 0
let down = 0
let up = 0
let velocity = 0
let snake: Sprite = null
let walls = sprites.create(img`
    3333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333
    3..............................................................................................................................................................3
    3..............................................................................................................................................................3
    3..............................................................................................................................................................3
    3..............................................................................................................................................................3
    3..............................................................................................................................................................3
    3..............................................................................................................................................................3
    3..............................................................................................................................................................3
    3..............................................................................................................................................................3
    3..............................................................................................................................................................3
    3..............................................................................................................................................................3
    3..............................................................................................................................................................3
    3..............................................................................................................................................................3
    3..............................................................................................................................................................3
    3..............................................................................................................................................................3
    3..............................................................................................................................................................3
    3..............................................................................................................................................................3
    3..............................................................................................................................................................3
    3..............................................................................................................................................................3
    3..............................................................................................................................................................3
    3..............................................................................................................................................................3
    3..............................................................................................................................................................3
    3..............................................................................................................................................................3
    3..............................................................................................................................................................3
    3..............................................................................................................................................................3
    3..............................................................................................................................................................3
    3..............................................................................................................................................................3
    3..............................................................................................................................................................3
    3..............................................................................................................................................................3
    3..............................................................................................................................................................3
    3..............................................................................................................................................................3
    3..............................................................................................................................................................3
    3..............................................................................................................................................................3
    3..............................................................................................................................................................3
    3..............................................................................................................................................................3
    3..............................................................................................................................................................3
    3..............................................................................................................................................................3
    3..............................................................................................................................................................3
    3..............................................................................................................................................................3
    3..............................................................................................................................................................3
    3..............................................................................................................................................................3
    3..............................................................................................................................................................3
    3..............................................................................................................................................................3
    3..............................................................................................................................................................3
    3..............................................................................................................................................................3
    3..............................................................................................................................................................3
    3..............................................................................................................................................................3
    3..............................................................................................................................................................3
    3..............................................................................................................................................................3
    3..............................................................................................................................................................3
    3..............................................................................................................................................................3
    3..............................................................................................................................................................3
    3..............................................................................................................................................................3
    3..............................................................................................................................................................3
    3..............................................................................................................................................................3
    3..............................................................................................................................................................3
    3..............................................................................................................................................................3
    3..............................................................................................................................................................3
    3..............................................................................................................................................................3
    3..............................................................................................................................................................3
    3..............................................................................................................................................................3
    3..............................................................................................................................................................3
    3..............................................................................................................................................................3
    3..............................................................................................................................................................3
    3..............................................................................................................................................................3
    3..............................................................................................................................................................3
    3..............................................................................................................................................................3
    3..............................................................................................................................................................3
    3..............................................................................................................................................................3
    3..............................................................................................................................................................3
    3..............................................................................................................................................................3
    3..............................................................................................................................................................3
    3..............................................................................................................................................................3
    3..............................................................................................................................................................3
    3..............................................................................................................................................................3
    3..............................................................................................................................................................3
    3..............................................................................................................................................................3
    3..............................................................................................................................................................3
    3..............................................................................................................................................................3
    3..............................................................................................................................................................3
    3..............................................................................................................................................................3
    3..............................................................................................................................................................3
    3..............................................................................................................................................................3
    3..............................................................................................................................................................3
    3..............................................................................................................................................................3
    3..............................................................................................................................................................3
    3..............................................................................................................................................................3
    3..............................................................................................................................................................3
    3..............................................................................................................................................................3
    3..............................................................................................................................................................3
    3..............................................................................................................................................................3
    3..............................................................................................................................................................3
    3..............................................................................................................................................................3
    3..............................................................................................................................................................3
    3..............................................................................................................................................................3
    3..............................................................................................................................................................3
    3..............................................................................................................................................................3
    3..............................................................................................................................................................3
    3..............................................................................................................................................................3
    3..............................................................................................................................................................3
    3..............................................................................................................................................................3
    3..............................................................................................................................................................3
    3..............................................................................................................................................................3
    3..............................................................................................................................................................3
    3..............................................................................................................................................................3
    3..............................................................................................................................................................3
    3..............................................................................................................................................................3
    3..............................................................................................................................................................3
    3..............................................................................................................................................................3
    3..............................................................................................................................................................3
    3..............................................................................................................................................................3
    3..............................................................................................................................................................3
    3..............................................................................................................................................................3
    3..............................................................................................................................................................3
    3..............................................................................................................................................................3
    3..............................................................................................................................................................3
    3..............................................................................................................................................................3
    3..............................................................................................................................................................3
    3..............................................................................................................................................................3
    3333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333
    `, SpriteKind.wall)
snake = sprites.create(img`
    . . . 2 2 . . . 
    . . 2 2 2 2 . . 
    . 2 2 2 2 2 2 . 
    2 2 2 2 2 2 2 2 
    2 2 2 2 2 2 2 2 
    . 2 2 2 2 2 2 . 
    . . 2 2 2 2 . . 
    . . . 2 2 . . . 
    `, SpriteKind.Player)
velocity = 50
up = -1
down = 1
left = -2
right = 2
current_direction = 0
snake.setFlag(SpriteFlag.StayInScreen, true)
RandomFood()
